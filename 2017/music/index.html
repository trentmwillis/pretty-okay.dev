<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Trent Willis' 2017 Music Journey</title>

  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif;
      margin: 0;
    }

    /* BANNER */

    .banner {
      background-image: linear-gradient(to left, #7b4397, #dc2430);
      box-sizing: border-box;
      color: white;
      min-height: 100vh;
      padding: 4rem 2rem;
      text-align: left;
    }

    .banner-inner {
      align-items: center;
      display: flex;
      flex-direction: column;
      margin: 0 auto;
      max-width: 50ch;
    }

    .banner-title {
      font-size: 48px;
      font-weight: bold;
      line-height: 1;
      margin: 0;
      text-transform: uppercase;
    }

    .banner-byline {
      color: white;
      font-size: 16px;
      letter-spacing: 2px;
      margin: 2rem 0;
      text-align: left;
    }

    .banner-description {
      color: white;
      font-size: 16px;
      line-height: 2;
      margin: 0;
    }

    @media (min-width: 320px) {
      .banner-title {
        font-size: calc(48px + 72 * ((100vw - 320px) / 760));
      }

      .banner-byline {
        font-size: calc(16px + 6 * ((100vw - 320px) / 760));
      }

      .banner-description {
        font-size: calc(16px + 2 * ((100vw - 320px) / 760));
      }
    }

    @media (min-width: 1080px) {
      .banner-title {
        font-size: 120px;
      }

      .banner-byline {
        font-size: 22px;
      }

      .banner-description {
        font-size: 18px;
      }
    }

    /* ENTRIES */

    .entry {
      background-position: 50% 0;
      background-size: contain;
      position: relative;
    }

    .entry::before {
      content: '';
      background: linear-gradient(to left, #7b4397, #dc2430);
      height: 100%;
      opacity: 0.3;
      position: absolute;
      width: 100%;
    }

    .entry-content {
      align-content: center;
      align-items: center;
      box-sizing: border-box;
      color: white;
      display: grid;
      grid-gap: 0;
      grid-template-columns: 1fr 1fr;
      margin: 0 auto;
      max-width: 1080px;
      min-height: 100vh;
      padding: 1rem;
      padding-top: 50vw;
      position: relative;
    }

    .entry header,
    .entry section {
      background: linear-gradient(to bottom, rgba(0,0,0,0.8) 0%, rgba(0,0,0,1));
      padding: 1rem;
    }

    .entry header {
      grid-row: 1;
      grid-column: 1/3;
    }

    .entry section {
      font-size: 16px;
      grid-column: 1/3;
      grid-row: 2;
      line-height: 2;
      column-count: 1;
    }

    .controls {
      grid-column: 1/3;
      grid-row: 3;
      text-align: center;
    }

    .title,
    .date {
      margin: 0;
    }

    .title {
      background: linear-gradient(to left, #7b4397, #dc2430);
      color: #7b4397;
      font-size: 22px;
      font-weight: 200;
      line-height: 1.5;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .date {
      font-size: 16px;
      line-height: 2;
    }

    .play,
    .pause {
      animation: pulse 2s infinite;
      background-color: rgba(123, 67, 151, 0.8);
      border: none;
      border-radius: 4px;
      color: white;
      cursor: pointer;
      font-size: 3rem;
      height: 5rem;
      margin: 2rem 0px;
      padding: 0;
      transition: background-color 0.3s, color 0.3s;
      width: 100%;
    }

    .pause {
      animation: none;
    }

    .play:hover,
    .play:focus,
    .pause:hover,
    .pause:focus {
      background-color: rgba(123, 67, 151, 1);
    }

    @keyframes pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(123, 67, 151, 0.6);
      }
      70% {
          box-shadow: 0 0 0 2rem rgba(123, 67, 151, 0);
      }
      100% {
          box-shadow: 0 0 0 0 rgba(123, 67, 151, 0);
      }
    }

    .entry .iframe-container {
      background: black;
      grid-row: 4;
      grid-column: 1/3;
      position: relative;
    }

    .entry .iframe-container::before {
      content: "";
      display: block;
      height: 0;
      padding-bottom: calc(100% / (16 / 9));
      transition: padding-bottom 0.5s;
      width: 1px;
    }

    .entry .iframe-container.is-hidden::before {
      padding-bottom: 0;
    }

    .entry iframe {
      position: absolute;
      height: 100%;
      left: 0;
      top: 0;
      width: 100%;
    }

    @media (min-width: 320px) {
      .title {
        font-size: calc(22px + 10 * ((100vw - 320px) / 760));
      }

      .date,
      .entry section {
        font-size: calc(16px + 2 * ((100vw - 320px) / 760));
      }
    }

    @media (min-width: 700px) {
      .entry-content {
        grid-gap: 1rem;
        padding-top: 1rem;
      }

      .entry header {
        grid-column: 1;
      }

      .entry section {
        column-count: 2;
      }

      .controls {
        grid-column: 2;
        grid-row: 1;
      }

      .play,
      .pause {
        border-radius: 5rem;
        border: 0.25rem solid white;
        width: 5rem;
      }

      .entry .iframe-container {
        grid-row: 3;
      }
    }

    @media (min-width: 1080px) {
      .title {
        font-size: 32px;
      }

      .date,
      .entry section {
        font-size: 18px;
      }
    }
  </style>
</head>
<body>
  <header class="banner">
    <div class="banner-inner">
      <h1 class="banner-title">2017<br>Music<br>Journey</h1>
      <p class="banner-byline">by @trentmwillis</p>
      <p class="banner-description">
          Every year I like to reflect on the music that was the most impactful to me. I used to do this by picking an "album of the year".
          <br>
          <br>
          Several years ago, however, I realized that trying to pick an "album of the year" or a list of the "best" albums led me to write and reflect on the albums that I thought others would approve of, and not necessarily the albums that actually played a large role in my life during the year.
          <br>
          <br>
          So, for the past few years, I have put together "music journeys" instead; lists of songs from various albums that I listened to a lot over the course of the year. I arrange the songs chronologically by when they entered my library, so the only reflection that has to happen is whether I thought the song was important to me and when I started listening to it.
          <br>
          <br>
          This is my first year sharing one of these lists and I hope you enjoy the peek into my life and what music has been important to me this year.
      </p>
    </div>
  </header>

  <main id="main">
  </main>

  <template id="entry-template">
    <article class="entry" data-background-image="./album-covers/{{imageName}}.jpg">
      <div class="entry-content">
        <header>
          <h2 class="title">&ldquo;<strong>{{song}}</strong>&rdquo; by <strong>{{artist}}</strong> on <strong><em>{{album}}</em></strong></h2>
          <p class="date">{{date}}</p>
        </header>

        <div class="controls">
          <button class="play" data-youtube-id="{{youtubeId}}">&#x25b6;&#xFE0E;</button>
          <button class="pause" style="display: none">&#9632;</button>
        </div>

        <section>{{review}}</section>

        <div class="iframe-container is-hidden"></div>
      </div>
    </article>
  </template>

  <script src="./bound-template.js"></script>
  <script>
    const createIframe = (container) => {
      const iframe = document.createElement('iframe');
      iframe.setAttribute('frameborder', 0);
      container.appendChild(iframe);
      return iframe;
    };

    document.addEventListener('click', (event) => {

      const target = event.target;
      if (target.classList.contains('play')) {

        const entry = target.closest('.entry');
        const iframeContainer = entry.querySelector('.iframe-container');

        iframeContainer.classList.remove('is-hidden');

        const iframe = createIframe(iframeContainer);
        iframe.src = `https://www.youtube.com/embed/${target.dataset.youtubeId}?autoplay=1`;

        target.style.display = 'none';
        entry.querySelector('.pause').style.display = null;

      } else if (target.classList.contains('pause')) {

        const entry = target.closest('.entry');
        const iframeContainer = entry.querySelector('.iframe-container');

        iframeContainer.classList.add('is-hidden');

        const iframe = iframeContainer.querySelector('iframe');
        iframeContainer.removeChild(iframe);

        target.style.display = 'none';
        entry.querySelector('.play').style.display = null;

      }

    });

    const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
    const monthToString = month => months[month - 1];
    const hyphenate = str => str.toLowerCase().split(' ').join('-').replace(/\!|'|:/g, '');
    const songInfo = [
      {
        date: "011317",
        album: "Forever",
        artist: "Code Orange",
        song: "The New Reality",
        youtubeId: "dZ9JVxQVQy4"
      },
      {
        date: "012317",
        album: "Pain & Suffering",
        artist: "Advent",
        song: "Weight of the World",
        youtubeId: "tJJHz-WE3Ao"
      },
      {
        date: "021817",
        album: "The Rhapsody Tapes",
        artist: "Ocean Grove",
        song: "Intimate Alien",
        youtubeId: "T2LO5FyASDU"
      },
      {
        date: "050517",
        album: "Thousand Mile Stare",
        artist: "Incendiary",
        song: "Front Toward Enemy",
        youtubeId: "H5FBvGpgGWg"
      },
      {
        date: "050517",
        album: "Reclaimer",
        artist: "Shadow of Intent",
        song: "The Horror Within",
        youtubeId: "qhuu0PIB8A0"
      },
      {
        date: "051417",
        album: "Cold",
        artist: "Gideon",
        song: "Champions",
        youtubeId: "y0ZIj27Km3U"
      },
      {
        date: "051717",
        album: "Two Parts Viper",
        artist: "'68",
        song: "Whether Terrified Or Unafraid",
        youtubeId: "3nOic5O6qvE"
      },
      {
        date: "052217",
        album: "Self Supremacy",
        artist: "Malevolence",
        song: "Self Supremacy",
        youtubeId: "E069_0MShkI"
      },
      {
        date: "052717",
        album: "LA Divine",
        artist: "Cold War Kids",
        song: "Restless",
        youtubeId: "dd8-wjXIoVo"
      },
      {
        date: "052817",
        album: "Surprise!",
        artist: "Mystery Weekend",
        song: "Everyone's A Liar",
        youtubeId: "a1MKhpxbhrg"
      },
      {
        date: "060317",
        album: "Ark",
        artist: "In Hearts Wake",
        song: "Nomad",
        youtubeId: "XKaS-TM1gUc"
      },
      {
        date: "060817",
        album: "Different Animals",
        artist: "Volumes",
        song: "Finite",
        youtubeId: "9ag2RyDdBWU"
      },
      {
        date: "061317",
        album: "Fantasy",
        artist: "Eternity Forever",
        song: "Movies",
        youtubeId: "1T_aVdFfH3Q"
      },
      {
        date: "061317",
        album: "Senpai EP II: The Noticing",
        artist: "Sithu Aye",
        song: "Summer Break!",
        youtubeId: "ftf961GlTbw"
      },
      {
        date: "061617",
        album: "Homey",
        artist: "Chon",
        song: "Nayhoo",
        youtubeId: "nPXPURGP-6k"
      },
      {
        date: "061617",
        album: "The Place I Feel Safest",
        artist: "Currents",
        song: "Forget Me",
        youtubeId: "ppO1TXmfpeA"
      },
      {
        date: "080717",
        album: "Pain Again",
        artist: "Varials",
        song: "E.D.A.",
        youtubeId: "XAm064U4Czk"
      },
      {
        date: "080917",
        album: "Deadweight",
        artist: "Wage War",
        song: "Southbound",
        youtubeId: "8nrNk4XzHB4",
        review: "I really don't think Wage War is that special of a band when it comes to metalcore, but their music is just ridiculously fun to jam and mosh to. On Deadweight, I don't think any song exemplifies that as much as Southbound, which is basically just a 3-minute long alternation between catchy, singalong choruses and moshable breakdowns."
      },
      {
        date: "080917",
        album: "Dear Desolation",
        artist: "Thy Art is Murder",
        song: "Slaves Beyond Death",
        youtubeId: "yvPK0qKB8m4"
      },
      {
        date: "080917",
        album: "Freedom",
        artist: "Crossfaith",
        song: "Freedom",
        youtubeId: "VYWbnIPbnJo"
      },
      {
        date: "080917",
        album: "Always Lose",
        artist: "The Gospel Youth",
        song: "Moods Like English Weather",
        youtubeId: "EgMKWRmNT0g"
      },
      {
        date: "090617",
        album: "From the Unforgiving Arms of God",
        artist: "END",
        song: "Usurper",
        youtubeId: "suUXNYGdjdo"
      },
      {
        date: "090917",
        album: "Only Death Is Real",
        artist: "Stray From The Path",
        song: "Strange Fiction",
        youtubeId: "VDu3qECc91Y",
        review: "With this past year in United States politics, it is only natural that Stray From The Path released what is quite possibly their most controversial and in your face record yet. In typical (and enjoyable) fashion, they deliver a heavy, New York influenced take on rap-infused hardcore. While not my favorite album by them, it certainly has some seriously banging tracks on it. The opener is no exception. It's short, sweet, and likely to make the kids lose their shit (I also realized, I'm old enough now to say this)."
      },
      {
        date: "092517",
        album: "You're Not You Anymore",
        artist: "Counterparts",
        song: "Bouquet",
        youtubeId: "mhI5JfwXdfE",
        review: "This album blew me away. I was not a huge fan of their past works that I had listened to, but this album just connects so much better for me. The vocals are crisper, the songs more varied, and that combination just drives home the aggressive driving brand of hardcore that Counterparts is known for. Bouquet is a perfect example of this as the leading track after the intro that absolutely launches the album straight into high gear. It's so good, which has made it quite difficult to give the back-half of the albums as much attention unfortunately."
      },
      {
        date: "092517",
        album: "The Spark",
        artist: "Enter Shikari",
        song: "The Sights",
        youtubeId: "9ymjcSvEyhk",
        review: "I was really unsure how I felt about this album upon listening to it. The album has much stronger pop and electronic elements than their previous works which often borrowed heavily from post-hardcore and punk influences. That said, it is very much in keeping with the bands genre-defying modus operandi and is really catchy throughout most of it. The Sights I feel is the best representation of this new Enter Shikari; it's poppy, catchy and yet still edgy enough that it is unlikely to ever see radio play in the States."
      },
      {
        date: "092517",
        album: "Nomad",
        artist: "Kublai Khan",
        song: "The Hammer",
        youtubeId: "8GGMdMo61_o",
        review: "They're back. And more pissed off than ever. I've been a fan of Kublai Khan for a while now, but their last album was underwhelming to me after the absolutely incredible Balancing Survival And Happiness. This album, however, sees them coming back into form with some more interesting song structures than in the past, though lyrically it leaves something to be desired. Anyway, The Hammer has been my go to jam for lifting heavy things since it was released and shows no signs of going away anytime soon."
      },
      {
        date: "100617",
        album: "Phantom Anthem",
        artist: "August Burns Red",
        song: "Float",
        youtubeId: "IioL0WpucBY",
        review: "The day August Burns Red releases an album I don't enjoy will likely be when I decide to stop listening to metal. Which will probably also be when I die. Joking aside, this album may be my favorite release of theirs since Constellations (which is huge). It feels much more cohesive than their last few albums, which often contained progressive elements that felt a little forced to me; on Phantom Anthem they feel natural. Invisible Enemy is a perfect example of this, as it blends their signature metalcore sound with some East Asian influences and even is reminiscent of their older work on Messengers. Oh, and it was nominated for a Grammy, so that's impressive."
      },
      {
        date: "100617",
        album: "Places",
        artist: "The Ongoing Concept",
        song: "You Will Go",
        youtubeId: "mC6rsfua81A",
        review: "I've been a huge fan of The Ongoing Concept since their pre-record-label days, so it was a big disappoint to me to see almost all the members of the band leave between their last album and this one. To say I was skeptical of it, would be a drastic understatement. That said, when I finally gave this single a listen, I was sold. The band still retains much of their original sound, but with slightly more experimentation (which is straneg, cause this band was already pretty out there). In particular, the album is highly self-referential which is really incredible. The music video for this song actually contains references to all their past music videos, which makes everything feel more connected to their previous works even with the lineup change."
      },
      {
        date: "102217",
        album: "Feel Something",
        artist: "Movements",
        song: "Daylily",
        youtubeId: "PedACuLiMxU",
        review: "I remember listening to Movements earlier in this year and finding their music underwhelming. However, after seeing them play at Worthwhile's farewell show and seeing how into it the crowd was, I felt I needed to give their new album a chance. In short, this album became one of my favorites of the year. Every song in the album is lovely, but Daylily stands out to me due to its lyrical themes and the alternating mellow and upbeat interplay of emo and pop-punk elements. If you, or anyone you know, has ever dealt with depression, this song will likely hit you hard."
      },
      {
        date: "110917",
        album: "Secret Wars",
        artist: "Hail The Sun",
        song: "Repellent",
        youtubeId: "s8fHxCFyZFA",
        review: "I've known about Hail The Sun for a while now, but hadn't given them a listen this EP was released. The band's sound is in many ways reminiscent of a blend of Circa Survive and Dance Gavin Dance, in the best ways possible. The proggy guitar riffs mixed with alternating soaring and blistering vocals satisfies both my love for dissonant and melodic music at the same time. In short, after listening to this opening track just once, I regretted not listening to this band sooner."
      },
      {
        date: "111217",
        album: "Cold Like War",
        artist: "We Came As Romans",
        song: "Wasted Age",
        youtubeId: "Elddy5PYe5w",
        review: "The first album by We Came As Romans was a big part of my senior (?) year of high school. So, it was always unfortunate that the bands albums since then didn't really ever catch my interest. Cold Like War, however, changed that. It has the same sort of blend of heavy, catchy, and unique that To Plant A Seed had without sounding they're just doing the same thing. Wasted Age in particular I feel represents how the band has evolved, yet still has many of the same elements that caused me to fall in love with the first album."
      }
    ].map(song => {
      const month = parseInt(song.date.substr(0, 2), 10);
      const day = parseInt(song.date.substr(2, 2), 10);
      const year = 2000 + parseInt(song.date.substr(4, 2), 10);
      song.date = `${monthToString(month)} ${day}, ${year}`;

      const imageName = `${hyphenate(song.artist)}_${hyphenate(song.album)}`;
      song.imageName = imageName;

      return song;
    });

    const main = document.getElementById('main');
    const template = new BoundTemplate(document.getElementById('entry-template'));

    const fragment = document.createDocumentFragment();
    const entries = songInfo.map(item => {
      const [instance] = template.create(item);
      const entry = instance.firstElementChild;
      fragment.appendChild(entry);
      return entry;
    });
    main.appendChild(fragment);

    const windowHeight = window.innerHeight;
    const halfWindowHeight = windowHeight / 2;
    document.addEventListener('scroll', function loadImages() {
      for (let i = 0; i < entries.length; i++) {
        const entry = entries[i];
        const rect = entry.getBoundingClientRect();

        if (
          rect.top >= -halfWindowHeight && rect.top <= windowHeight + halfWindowHeight ||
          rect.bottom >= -halfWindowHeight && rect.bottom <= windowHeight + halfWindowHeight
        ) {
          entry.style.backgroundImage = `url("${entry.dataset.backgroundImage}")`;
          entries.splice(i--, 1);
        }
      }

      if (entries.length === 0) {
        document.removeEventListener('scroll', loadImages);
      }
    }, { passive: true });
  </script>
</body>
</html>